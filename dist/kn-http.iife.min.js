/**
 * KnHttp v2.0.1 (2025-01-22T14:14:15.915Z)
 * Copyright (c) 2022 - 2025 Florent VIALATTE
 * Released under the MIT license
 */
var KnHttp=function(){'use strict';class e{_xhr;_onProgress;_onSuccess;_onError;_onEnd;constructor(){this._xhr=new XMLHttpRequest}abort(){this._xhr&&4!=this._xhr.readyState&&this._xhr.abort()}_progress(){this._onProgress&&this._onProgress.apply(null,arguments)}_success(){this._onSuccess&&this._onSuccess.apply(null,arguments),this._onEnd&&this._onEnd(!0),this._xhr&&(this._xhr=null)}_error(){this._onError&&this._onError.apply(null,arguments),this._onEnd&&this._onEnd(!1),this._xhr&&(this._xhr=null)}onProgress(e){return this._onProgress=e,this}onSuccess(e){return this._onSuccess=e,this}onError(e){return this._onError=e,this}onEnd(e){return this._onEnd=e,this}}function t(e,r){if(r){if(e.constructor===Array&&0==e.length||e.constructor===Object&&0==Object.keys(e).length)return r}else if(e.constructor===Array)throw'';const s=[];for(let o in e){const n=null==e[o]?'':e[o];e.constructor===Array?o=`${r}[${o}]`:e.constructor===Object&&(o=r?`${r}[${o}]`:o),'object'==typeof n?s.push(t(n,o)):s.push(`${o}=${encodeURIComponent(n)}`)}return s.join('&')}function r(e,t,s){if(t){if(e.constructor===Array&&0==e.length||e.constructor===Object&&0==Object.keys(e).length)return void s.append(t,"")}else if(e.constructor===Array)throw'';s=s||new FormData;for(let o in e){const n=null==e[o]?'':e[o];e.constructor===Array?o=`${t}[${o}]`:e.constructor===Object&&(o=t?`${t}[${o}]`:o),'object'==typeof n?r(n,o,s):s.append(o,n)}return s}return new class{VERSION="2.0.1";CANCELED_ERROR=-1;NETWORK_ERROR=0;HTTP_ERROR=1;UNKNOWN_ERROR=2;DEFAULTS={validateStatus:this.validateStatus,timeout:27e4,basicAuth:null,bearerAuthToken:null,withCredentials:!1,requestType:'raw',responseType:'json',csrfHeader:'X-CSRF',headers:{Accept:'*/*','X-Requested-With':'XMLHttpRequest'}};validateStatus(e){return 200==e}request(s,o,n){const u=new e;n=Object.assign({timeout:this.DEFAULTS.timeout,requestType:this.DEFAULTS.requestType,responseType:this.DEFAULTS.responseType,withCredentials:this.DEFAULTS.withCredentials,basicAuth:this.DEFAULTS.basicAuth,bearerAuthToken:this.DEFAULTS.bearerAuthToken,csrfHeader:this.DEFAULTS.csrfHeader,download:!1,upload:!1,headers:{},csrf:null,body:null},n||{});const h={};for(const e in n.headers)h[e.trim().toLowerCase()]=n.headers[e];for(const e in this.DEFAULTS.headers){const t=e.trim().toLowerCase();void 0===h[t]&&(h[t]=this.DEFAULTS.headers[e])}u._xhr.open(o.toUpperCase(),s,!0),u._xhr.timeout=n.timeout,u._xhr.withCredentials=n.withCredentials,n.basicAuth&&u._xhr.setRequestHeader('Authorization','Basic '+window.btoa((n.basicAuth.username||'')+':'+(n.basicAuth.password||''))),n.bearerAuthToken&&u._xhr.setRequestHeader('Authorization','Bearer '+n.bearerAuthToken),n.csrf&&u._xhr.setRequestHeader(n.csrfHeader,n.csrf);for(const e in h)u._xhr.setRequestHeader(e,h[e]);if(u._xhr.responseType=n.responseType,u._xhr.onloadend=e=>{if(u._xhr)if(this.DEFAULTS.validateStatus(u._xhr.status)){let e=function(e){const t={};return e.trim().split(/[\r\n]+/).forEach((e=>{const r=e.split(': '),s=r.shift(),o=r.join(': ');t[s]=o})),t}(u._xhr.getAllResponseHeaders());n.download&&'blob'==n.responseType?(function(e,t){const r=window.URL.createObjectURL(e),s=document.createElement('a');s.href=r,s.setAttribute('download',t),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(r)}(u._xhr.response,function(e,t){let r;if(e&&-1!==e.indexOf('attachment')){let t=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(e);null!=t&&t[1]&&(r=t[1].replace(/['"]/g,''))}return r||(r=t.substring(t.lastIndexOf('/')+1).split(/[?#]/)[0]),r||(r='download'),decodeURIComponent(r)}(u._xhr.getResponseHeader('content-disposition'),s)),u._success(!0,e)):'json'!=n.responseType||u._xhr.response?u._success(u._xhr.response,e):u._error(this.UNKNOWN_ERROR,u._xhr.status)}else u._error(this.HTTP_ERROR,u._xhr.status)},u._xhr.onerror=e=>{u._xhr&&u._error(this.NETWORK_ERROR,u._xhr.status)},u._xhr.ontimeout=e=>{u._xhr&&u._error(this.UNKNOWN_ERROR,u._xhr.status)},u._xhr.onabort=e=>{u._xhr&&u._error(this.CANCELED_ERROR,u._xhr.status)},n.download&&(u._xhr.onprogress=e=>{u._xhr&&u._progress(e.lengthComputable?Math.floor(e.loaded/e.total*100):-1)}),n.upload&&(u._xhr.upload.onprogress=e=>{u._xhr&&u._progress(e.lengthComputable?Math.floor(e.loaded/e.total*100):-1)},u._xhr.upload.onerror=e=>{u._xhr&&u._error(this.NETWORK_ERROR,u._xhr.status)}),n.body)switch(n.requestType){case'json':u._xhr.setRequestHeader('Content-Type','application/json'),n.body=JSON.stringify(n.body);break;case'form':u._xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded'),n.body=t(n.body);break;case'formData':n.body=r(n.body)}return u._xhr.send(n.body||null),u}get(e,t){return this.request(e,'GET',t)}getText(e,t){return t||(t={}),t.responseType='text',this.request(e,'GET',t)}del(e,t){return this.request(e,'DELETE',t)}download(e,t){return t||(t={}),t.download=!0,t.responseType='blob',this.request(e,'GET',t)}postRaw(e,t,r){return r||(r={}),r.body=t,r.requestType='raw',this.request(e,'POST',r)}postForm(e,t,r){return r||(r={}),r.body=t,r.requestType='form',this.request(e,'POST',r)}postFormData(e,t,r){return r||(r={}),r.body=t,r.requestType='formData',this.request(e,'POST',r)}postJson(e,t,r){return r||(r={}),r.body=t,r.requestType='json',this.request(e,'POST',r)}putRaw(e,t,r){return r||(r={}),r.body=t,r.requestType='raw',this.request(e,'PUT',r)}putForm(e,t,r){return r||(r={}),r.body=t,r.requestType='form',this.request(e,'PUT',r)}putFormData(e,t,r){return r||(r={}),r.body=t,r.requestType='formData',this.request(e,'PUT',r)}putJson(e,t,r){return r||(r={}),r.body=t,r.requestType='json',this.request(e,'PUT',r)}}}();
