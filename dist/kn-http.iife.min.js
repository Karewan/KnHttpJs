/**
 * KnHttp v3.0.2 (2025-04-02T09:02:13.199Z)
 * Copyright (c) 2022 - 2025 Florent VIALATTE
 * Released under the MIT license
 */
var KnHttp=function(){'use strict';class e{constructor(e,t,r){this.data=e,this.headers=t,this.httpCode=r}}class t{constructor(e,t,r=null,s={}){this.code=e,this.httpCode=t,this.data=r,this.headers=s}}class r{_xhr;_onProgress;_onSuccess;_onError;_onEnd;constructor(){this._xhr=new XMLHttpRequest}abort(){this._xhr&&4!=this._xhr.readyState&&this._xhr.abort()}_progress(e){this._onProgress&&this._onProgress.apply(null,arguments)}_success(e){this._onSuccess&&this._onSuccess.apply(null,arguments),this._onEnd&&this._onEnd(!0),this._xhr&&(this._xhr=null)}_error(e){this._onError&&this._onError.apply(null,arguments),this._onEnd&&this._onEnd(!1),this._xhr&&(this._xhr=null)}onProgress(e){return this._onProgress=e,this}onSuccess(e){return this._onSuccess=e,this}onError(e){return this._onError=e,this}onEnd(e){return this._onEnd=e,this}}function s(e,t){if(t){if(e.constructor===Array&&0==e.length||e.constructor===Object&&0==Object.keys(e).length)return t}else if(e.constructor===Array)throw'';const r=[];for(let o in e){const n=null==e[o]?'':e[o];e.constructor===Array?o=`${t}[${o}]`:e.constructor===Object&&(o=t?`${t}[${o}]`:o),'object'==typeof n?r.push(s(n,o)):r.push(`${o}=${encodeURIComponent(n)}`)}return r.join('&')}function o(e,t,r){if(t){if(e.constructor===Array&&0==e.length||e.constructor===Object&&0==Object.keys(e).length)return void r.append(t,"")}else if(e.constructor===Array)throw'';r=r||new FormData;for(let s in e){const n=null==e[s]?'':e[s];e.constructor===Array?s=`${t}[${s}]`:e.constructor===Object&&(s=t?`${t}[${s}]`:s),'object'!=typeof n||n instanceof File?r.append(s,n):o(n,s,r)}return r}return new class{VERSION="3.0.2";CANCELED_ERROR=-1;NETWORK_ERROR=0;HTTP_ERROR=1;UNKNOWN_ERROR=2;DEFAULTS={validateStatus:this.validateStatus,onError:null,timeout:27e4,basicAuth:null,bearerAuthToken:null,withCredentials:!1,requestType:'raw',responseType:'json',csrfHeader:'X-CSRF',headers:{Accept:'*/*','X-Requested-With':'XMLHttpRequest'}};validateStatus(e){return 200==e}request(n,h,u){const a=new r;this.DEFAULTS.onError&&a.onError(this.DEFAULTS.onError),u=Object.assign({timeout:this.DEFAULTS.timeout,requestType:this.DEFAULTS.requestType,responseType:this.DEFAULTS.responseType,withCredentials:this.DEFAULTS.withCredentials,basicAuth:this.DEFAULTS.basicAuth,bearerAuthToken:this.DEFAULTS.bearerAuthToken,csrfHeader:this.DEFAULTS.csrfHeader,download:!1,upload:!1,headers:{},csrf:null,body:null},u||{});const i={};for(const e in u.headers)i[e.trim().toLowerCase()]=u.headers[e];for(const e in this.DEFAULTS.headers){const t=e.trim().toLowerCase();void 0===i[t]&&(i[t]=this.DEFAULTS.headers[e])}a._xhr.open(h.toUpperCase(),n,!0),a._xhr.timeout=u.timeout,a._xhr.withCredentials=u.withCredentials,u.basicAuth&&a._xhr.setRequestHeader('Authorization','Basic '+window.btoa((u.basicAuth.username||'')+':'+(u.basicAuth.password||''))),u.bearerAuthToken&&a._xhr.setRequestHeader('Authorization','Bearer '+u.bearerAuthToken),u.csrf&&a._xhr.setRequestHeader(u.csrfHeader,u.csrf);for(const e in i)a._xhr.setRequestHeader(e,i[e]);if(a._xhr.responseType=u.responseType,a._xhr.onloadend=r=>{if(!a._xhr)return;const s=function(e){const t={};return e.trim().split(/[\r\n]+/).forEach((e=>{const r=e.split(': '),s=r.shift(),o=r.join(': ');t[s]=o})),t}(a._xhr.getAllResponseHeaders());this.DEFAULTS.validateStatus(a._xhr.status)?u.download&&'blob'==u.responseType?(function(e,t){const r=window.URL.createObjectURL(e),s=document.createElement('a');s.href=r,s.setAttribute('download',t),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(r)}(a._xhr.response,function(e,t){let r;if(e&&-1!==e.indexOf('attachment')){let t=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(e);null!=t&&t[1]&&(r=t[1].replace(/['"]/g,''))}return r||(r=t.substring(t.lastIndexOf('/')+1).split(/[?#]/)[0]),r||(r='download'),decodeURIComponent(r)}(a._xhr.getResponseHeader('content-disposition'),n)),a._success(new e(!0,s,a._xhr.status))):'json'!=u.responseType||a._xhr.response?a._success(new e(a._xhr.response,s,a._xhr.status)):a._error(new t(this.UNKNOWN_ERROR,a._xhr.status,a._xhr.response,s)):a._error(new t(this.HTTP_ERROR,a._xhr.status,a._xhr.response,s))},a._xhr.onerror=e=>{a._xhr&&a._error(new t(this.NETWORK_ERROR,a._xhr.status))},a._xhr.ontimeout=e=>{a._xhr&&a._error(new t(this.UNKNOWN_ERROR,a._xhr.status))},a._xhr.onabort=e=>{a._xhr&&a._error(new t(this.CANCELED_ERROR,a._xhr.status))},u.download&&(a._xhr.onprogress=e=>{a._xhr&&a._progress(e.lengthComputable?Math.floor(e.loaded/e.total*100):-1)}),u.upload&&(a._xhr.upload.onprogress=e=>{a._xhr&&a._progress(e.lengthComputable?Math.floor(e.loaded/e.total*100):-1)},a._xhr.upload.onerror=e=>{a._xhr&&a._error(new t(this.NETWORK_ERROR,a._xhr.status))}),u.body)switch(u.requestType){case'json':a._xhr.setRequestHeader('Content-Type','application/json'),u.body=JSON.stringify(u.body);break;case'form':a._xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded'),u.body=s(u.body);break;case'formData':u.body=o(u.body)}return a._xhr.send(u.body||null),a}get(e,t){return this.request(e,'GET',t)}getText(e,t){return t||(t={}),t.responseType='text',this.request(e,'GET',t)}del(e,t){return this.request(e,'DELETE',t)}download(e,t){return t||(t={}),t.download=!0,t.responseType='blob',this.request(e,'GET',t)}postRaw(e,t,r){return r||(r={}),r.body=t,r.requestType='raw',this.request(e,'POST',r)}postForm(e,t,r){return r||(r={}),r.body=t,r.requestType='form',this.request(e,'POST',r)}postFormData(e,t,r){return r||(r={}),r.body=t,r.requestType='formData',this.request(e,'POST',r)}postJson(e,t,r){return r||(r={}),r.body=t,r.requestType='json',this.request(e,'POST',r)}putRaw(e,t,r){return r||(r={}),r.body=t,r.requestType='raw',this.request(e,'PUT',r)}putForm(e,t,r){return r||(r={}),r.body=t,r.requestType='form',this.request(e,'PUT',r)}putFormData(e,t,r){return r||(r={}),r.body=t,r.requestType='formData',this.request(e,'PUT',r)}putJson(e,t,r){return r||(r={}),r.body=t,r.requestType='json',this.request(e,'PUT',r)}}}();
